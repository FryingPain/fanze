<!DOCTYPE html>
<html>
<head>
	<link rel="shortcut icon" href="/fanze/assets/favicon.png" type="image/x-icon">
	<title>YouDiedProductions™ Musica Playeror</title>
	<meta charset="UTF-8">
	<style>
		body {
			background-color: #f2f2f2;
			font-family: Arial, sans-serif;
			text-align: center;
			background-size: 50vw 50vh;
			background-position: center;
			background-repeat: repeat;
		}
		
		h1 {
			margin-top: 50px;
		}
		
		audio {
			margin-top: 50px;
		}
		
		input[type="range"] {
			width: 70%;
			margin-top: 20px;
		}
		
		#time-info {
			margin-top: 20px;
		}
	</style>
	
</head>
<body>
	<h1>YouDiedProductions™ Musica Playeror</h1>
	totally not stolen from chatgpt<br>
	If the music doesn't play, you are probably dumb enough to not link a valid audio file you dumbo.
	<audio id="music" src="" ontimeupdate="updateTime()" autoplay>
		Your browser does not support the audio element.
	</audio>
	<div>
		<input type="range" id="seek-bar" value="0" min="0" step="1" oninput="seek()">
	</div>
	<div id="time-info">0:00 / 0:00</div>
	<div>
		<button onclick="play()">Play</button>
		<button onclick="pause()">Pause</button>
		<button onclick="stop()">Stop</button>
		<button onclick="changeMusic()">Change Music</button>
		<button onclick="downloadFile()">Download File</button>
		<label class="switch">
            <input type="checkbox" id="loop-toggle" onchange="toggleLoop()">
            <span class="slider"></span>
        </label>
        <span id="loop-label">Loop</span>
	</div>
	<div>
		<p>or... upload your own!</p>
		<input type="file" id="file-input" accept="audio/*" onchange="playSelectedFile()">
	</div>
	<script>
	var player = document.getElementById("music")
	player.setAttribute('src',audioFile)
	player.load();
	player.onloadedmetadata = function() {
	updateTime()
	formatTime(player.duration)
	document.getElementById("seek-bar").max = player.duration
	if (player.readyState === 0) {
		location.reload()
	}
  
	}
	</script>
	<script>
		var audio = document.getElementById("music");
		var seekBar = document.getElementById("seek-bar");
		var timeInfo = document.getElementById("time-info");
		var loopToggle = document.getElementById("loop-toggle");
		
		function play() {
			audio.play();
			seekBar.value = audio.currentTime;
		}
		
		function pause() {
			audio.pause();
		}
		
		function stop() {
			audio.pause();
			audio.currentTime = 0;
		}
		
		function downloadFile() {
			var audioElement = document.getElementById('music'); // Replace 'myAudio' with the ID of your <audio> element
			var sourceUrl = audioElement.src;
			var downloadLink = document.createElement('a');
			downloadLink.href = sourceUrl;
			downloadLink.download = getFilenameFromUrl(sourceUrl);
      
			downloadLink.click();
		}
		
		function getFilenameFromUrl(url) {
			const lastSlashIndex = url.lastIndexOf("/");
			return url.substring(lastSlashIndex + 1);
		}
		
		function seek() {
			audio.currentTime = seekBar.value;
		}
		
		function updateTime() {
			var currentTime = formatTime(audio.currentTime);
			var duration = formatTime(audio.duration);
			timeInfo.innerHTML = currentTime + " / " + duration;
			seekBar.value = audio.currentTime;
		}
		
		function formatTime(time) {
			var minutes = Math.floor(time / 60);
			var seconds = Math.floor(time % 60);
			if (seconds < 10) {
				seconds = "0" + seconds;
			}
			return minutes + ":" + seconds;
		}
		
		function changeMusic() {
			var audioFile = prompt("Please enter the URL of your audio file:", "");
			if ((audioFile == "") || (audioFile == null)){
				alert("No audio file selected. Normally i would send you to a werewolf Luz transformation video, but not now.")
				alert("You are still a stupid idiot btw")
			}
			var player = document.getElementById("music")
			player.setAttribute('src',audioFile)
			player.load();
			audio.onloadedmetadata = function() {
				updateTime()
				formatTime(audio.duration)
				document.getElementById("seek-bar").max = player.duration
			}
		}
		
		function playSelectedFile() {
			var fileInput = document.getElementById('file-input');
			var file = fileInput.files[0];
      
			if (file) {
				var reader = new FileReader();
				reader.onload = function(event) {
				audio.src = event.target.result;
				audio.load();
				audio.play();
				updateTime();
				formatTime(audio.duration);
				seekBar.max = audio.duration;
			};
			reader.readAsDataURL(file);
			}
		
		}
		
		function toggleLoop() {
			audio.loop = loopToggle.checked;
		}
		
	</script>
</body>
<script>
        var userResponse = confirm("Attention...\nThe background photo is very smelly xD\nwould ya like to remove it for the current session?");

        if (userResponse === true) {
            document.body.style.backgroundImage = "none";
        } else {
            document.body.style.backgroundImage = "url('/fanze/assets/remix-4ef1522b-4a2a-4fdc-ab62-8f9f1bfeee4f.png')";
        }
    </script>
	<script>
	var audioFile = prompt("Please enter the URL of your audio file:", "");
	if ((audioFile == "") || (audioFile == null)){
		alert("No audio file selected. Normally i would send you to a werewolf Luz transformation video, but not now. You need to input the URL or upload a file later on though.")
		alert("You are still a stupid idiot btw")
	}
	console.log("--YouDiedProductions™ Musica Playeror---------------------")
	console.log("|Hey there! You can also the music using the console!     |")
	console.log("|Just type [ audio.src = 'https://example.com/sound.mp3' ]|")
	console.log("|and voila! Why wasting time on typing this command tho?  |")
	console.log("|Well, i ask the same. Have fun!                          |")
	console.log("-----------------------------------------------------------")
</script>
</html>
